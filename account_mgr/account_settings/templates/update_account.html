{% extends "base.html" %}
<head>
  {% block head %}
  <title>{% block title %}Account Update{% endblock title %}</title>

  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/account.css')}}"
  />

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  {% endblock head %}
</head>

{% block body %} 
{% block content %}
<div class="page-wrapper">
  <div class="container">
    <nav class="sidebar shadow-sm">
      <div class="text-center">
        <img src="{{ image_file }}" alt="Profile" class="profile-img" />
        <h3 class="mt-2">{{ current_user.username }}</h3>
        <p>{{ current_user.email }}</p>
        <p>123-123-555</p>
      </div>
      <hr />
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" id="profileLink">Profile Overview</a>
        </li>
        {% block account %} 
        {% endblock account %}

        {% block password %}
        <li class="nav-item">
          <a class="nav-link" id="resetLink">Update Account</a>
        </li>
        {% endblock password %}

        {% block forgot_password %} 
        {% endblock forgot_password %}
        <!--  -->
        {#
        <li class="nav-item">
          <strong>
            <a
              class="nav-link"
              href="{% if current_user.is_super_admin or current_user.user_role == 'Admin' %}
                         {{ url_for('super_admin_secure.secure_adashboard') }}
                      {% else %}
                         {{ url_for('view.user_secure_dashboard') }}
                      {% endif %}"
            >
              Back to Dashboard
            </a>
          </strong>
        </li>
        #}
        <!--  -->
        {% if not current_user.is_super_admin or not
        current_user.is_default_credential %}
        <li class="nav-item">
          <strong>
            <a
              class="nav-link"
              href="{% if current_user.is_super_admin or current_user.user_role == 'Admin' %}
                   {{ url_for('super_admin_secure.secure_adashboard') }}
                {% else %}
                   {{ url_for('view.user_secure_dashboard') }}
                {% endif %}"
            >
              Back to Dashboard
            </a>
          </strong>
        </li>
        {% endif %}
      </ul>
    </nav>

    <!-- Main Content -->
    <main class="content-area">
      <div id="profile" class="profile-container">
        <h4 class="text-danger">Profile Overview</h4>
        <p><strong>Name:</strong> {{ current_user.username }}</p>
        <p><strong>Email:</strong> {{ current_user.email }}</p>
        <p><strong>Phone:</strong> 123-123-555</p>
      </div>

      {% block form %}
      <div id="reset" class="reset-container">
        <h4 class="text-danger">Reset Password</h4>
        <form method="post" enctype="multipart/form-data">
          {{ form.hidden_tag() }}

          <div class="mb-3">
            {{ form.email(class="form-control mb-3")}}
          </div>

          <div class="mb-3">
            {{ form.username(class="form-control mb-3")}}
          </div>

          <div class="mb-3">
            {{ form.password(class="form-control mb-3")}}
          </div>

          <div class="mb-3">
            {{ form.confirm_password(class="form-control mb-3")}}
          </div>

          {% if form.username.errors %} 
          {% for error in form.username.errors %}
          <span class="text-danger"> {{ error }}</span>
          {% endfor %} 
          {% endif %} 
          {% block user_profile %}

          <div class="form-group">
            {{ form.picture(class='form-control mb-3')}} 
            {% if form.picture.errors %} 
            {% for error in form.picture.errors %}
            <span class="text-danger"> {{ error }} </span>
            {% endfor %} 
            {% endif %}
          </div>
          {% endblock user_profile %}

          <button type="submit" class="btn btn-warning">Reset Password</button>
        </form>
      </div>
      {% endblock form %}
    </main>
  </div>
  <!-- Include the flash message section here -->
  {% include 'flash_message.html' %}
</div>
{% endblock content %}
<script src="{{ url_for('static', filename='js/account.js')}}"></script>
{% endblock body %}
